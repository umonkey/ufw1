# Настройки сайта

Основные настройки лежат в файле `src/settings.php`, в виде массива.  Этот файл должен содержать только те данные,
которые можно безвредно публиковать, например, в публичном репозитории исходного кода.  Это структура документов,
роли для доступа к ним, адреса внешних служб.  Эта информация имеет большую ценность и восстанавливать её с нуля
в случае утраты может быть сложно, поэтому её стоит хранить в репозиториий.

Для хранения паролей следует использовать настройки окружения.


## Настройки окружения

Для хранения секретных ключей следует использовать отдельные файлы, например,
`.env-devel.php`, которые корректируют общие настройки.  Загрузка обычно
находится в конце файла `src/settings.php` и выглядит примерно так:

```
$settings = [/* ... */];

$_env = $_ENV['ENVIRONMENT'] ?? 'devel';
$_private = __DIR__ . "/../.env-{$env}.php";

if (is_readable($_private)) {
	include $_private;
}

return ['settings' => $settings];
```

Сами файлы выглядят примерно так:

```
$settings['dsn']['name'] = 'mysql:dbname=foobar';
$settings['files']['path'] = __DIR__ . '/../data/files';
```

Для этих целей часто используют пакет [phpdotenv][1], однако задача настолько
примитивна, что использование для неё столь сложной конструкции представляется
избыточным.  Кроме того, файл `.env` статичен и не может содержать выражений,
например, для построения пути, скрипты php таких ограничений не имеют.

[1]: https://packagist.org/packages/vlucas/phpdotenv
